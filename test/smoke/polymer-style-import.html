<style is="custom-style">
  :root {
    --pad: 20px;
    --x-polymer: {
      border: 2px dotted tomato;
    };
  }

  x-prop {
    background-color: purple !important;
  }
</style>


<dom-module id="x-prop">
  <template>
    <style>
      :host {
        display: block;
        background-color: var(--foo);
      }
    </style>
    x-prop
  </template>
  <script>
    Polymer({ is: 'x-prop'});
  </script>
</dom-module>

<dom-module id="x-mixin">
  <template>
    <style>
      :host {
        display: block;
        @apply --mixin;
      }
    </style>
    x-mixin
  </template>
  <script>
    Polymer({ is: 'x-mixin'});
  </script>
</dom-module>

<dom-module id="x-polymer">
  <template>
    <style>
      :host {
        display: block;
        padding: var(--pad);
        @apply --x-polymer;
      }

      x-prop {
        --foo: orange;
      }

      x-mixin {
        --mixin: {
          background-color: red;
          color: blue;
          padding: 8px;
        }
      }

      .stuff {
        background: tomato;
        margin: 1px;
      }
    </style>
    <div>
      <x-prop></x-prop>
      <x-mixin></x-mixin>
      <template is="dom-repeat" items="{{items}}">
        <div class="stuff">stuff: {{item.stuff}}</div>
      </template>
    </div>
  </template>
  <script>
    Polymer({

    is: 'x-polymer',

    listeners: {
      tap: '_tap'
    },

    properties: {
      items: {
        value: [{stuff: '1'}, {stuff: '2'}, {stuff: '3'}]
      }
    },

    _tap: function(e) {
      console.log(e.type, e);
    }

  });
  </script>
</dom-module>

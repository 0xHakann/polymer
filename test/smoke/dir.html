<!doctype html>
<!--
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html dir="rtl">
<head>
  <script src="../../../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../../polymer-element.html">
  <link rel="import" href="../../lib/mixins/dir-mixin.html">
</head>
<body>
  <!--
    Issues
    1. regex will process entire string, including comments and properties, not just selectors...
    2. complex selectors. not ok... e.g.
    bad: .special > *:dir(rtl)
    but ok: .special:dir(rtl) > *
    3. multiple selectors per line? ok.
  -->
  <dom-module id="x-inner-dir">
    <template>
      <style>
        :host {
          display: block;
          height: 20px;
          color: white;
        }
        section:dir(rtl), input:dir(rtl) {
          border: 10px solid gray;
        }

        .special:dir(rtl) > * {
          color: green;
        }
      </style>
      <div>no rtl styling</div>
      <section>rtl styling</section>
      <input value="rtl styling">
      <div class="special">
        <div>at the right.</div>
      </div>
    </template>
    <script>
      addEventListener('WebComponentsReady', () => {
        class XInnerDir extends Polymer.DirMixin(Polymer.Element) {
          static get is() {return 'x-inner-dir'}
        }
        customElements.define(XInnerDir.is, XInnerDir);
      })
    </script>
  </dom-module>
  <dom-module id="x-dir">
    <template>
      <style>
        :host {
          display: block;
          background-color: rgb(0, 0, 255);
          min-height: 100px;
          width: 100px;
        }
        :host(:dir(rtl)) {
          background-color: rgb(0, 128, 0);
        }
        #foo:dir(rtl) {
          border: 10px solid red;
        }
        .thing:dir(rtl) {
          border: 10px solid blue;
        }
      </style>
      <div id="foo"></div>
      <div class="thing"></div>
      <x-inner-dir></x-inner-dir>
    </template>
    <script>
      addEventListener('WebComponentsReady', () => {
        class XDir extends Polymer.DirMixin(Polymer.Element) {
          static get is() {return 'x-dir';}
        }
        customElements.define(XDir.is, XDir);
      });
    </script>
  </dom-module>
  <x-dir></x-dir>
</body>
</html>
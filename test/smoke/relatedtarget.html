<!doctype html>
<template id="a">
  <div>Hi</div>
</template>
<template id="b">
  <div>Hello</div>
</template>
<template id="c">
  <x-inner id="one"></x-inner>
  <x-inner id="two"></x-inner>
</template>
<x-outer id="outer"></x-outer>
<x-other id="other"></x-other>
<script>
function shadowMaker(template) {
  return class extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({mode: 'open'});
      this.shadowRoot.appendChild(document.importNode(template.content, true));
    }
  }
}
customElements.define('x-inner', shadowMaker(document.querySelector('#b')));
customElements.define('x-other', shadowMaker(document.querySelector('#a')));
customElements.define('x-outer', shadowMaker(document.querySelector('#c')));

function fire() {
  var inner = outer.shadowRoot.firstElementChild;
  var relatedTarget = outer.shadowRoot.querySelector('#two').shadowRoot.firstElementChild;
  // var target = other.shadowRoot.firstElementChild;
  var target = outer.shadowRoot.querySelector('#one');
  target.dispatchEvent(new MouseEvent('foo', {bubbles: true, composed: true, relatedTarget}));
}

outer.shadowRoot.addEventListener('foo', e => {
  console.log(e.target, e.relatedTarget)
  console.log(e.composedPath());
});
</script>

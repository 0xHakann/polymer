<!doctype html>
<!--
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
<head>
  <title>Polymer - properties</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="../../../webcomponentsjs/webcomponents-lite.js"></script>

  <link rel="import" href="../../src/attributes/attribute-to-property.html">
  <link rel="import" href="../../src/properties/property-accessors.html">

</head>
<body>

  <template id="template">
    <div>foo: <span id="foo"></span></div>
    <div>bar: <span id="bar"></span></div>
    <div>concat(foo, bar): <span id="concat"></span></div>
  </template>

  <script>
  (function() {
    'use strict';

    var logEl = window.logEl = function(el) {
      return el.localName + (el.id ? '#' + el.id : '');
    };

    var attributes = new Polymer.AttributeToProperty();
    var accessors = new Polymer.PropertyAccessors();

    class XTest extends HTMLElement {

      static get observedAttributes() {
        return ['foo', 'bar', 'baz'];
      }

      attributeChangedCallback(name, old, value) {
        attributes.attributeToProperty(this, name, value);
      }

      createdCallback() {
        this.attachShadow({mode:'open'}).appendChild(
          document.importNode(template.content, true));
      }

      validate(props, oldProps, changedProps) {
        if (changedProps.foo) {
          this.shadowRoot.querySelector('#foo').textContent = props.foo;
        }
        if (changedProps.bar) {
          this.shadowRoot.querySelector('#bar').textContent = props.bar;
        }
        if (changedProps.foo || changedProps.bar) {
          this.shadowRoot.querySelector('#concat').textContent =
            `${props.foo} ${props.bar}`;
        }
      }

    }

    accessors.createAcessorsForAttributes(XTest);

    customElements.define('x-test', XTest);

  })();
  </script>

  <x-test id="el1" foo="foo" bar="bar"></x-test>

  <script>

    var logEl = window.logEl;

  </script>

</body>
</html>

<dom-module id="x-foo">
  <template>
    <x-bar id="bar"
           prop="{{prop}}"
           itemProp="{{itemProp}}"
           parent-prop="{{parentProp}}"
           parent-item-prop="{{parentItemProp}}"
           parent-parent-prop="{{parentParentProp}}"
           parent-parent-item-prop="{{parentParentItemProp}}"
           parent-parent-parent-prop="{{parentParentParentProp}}"
           parent-parent-parent-item-prop="{{parentParentParentItemProp}}">
    </x-bar>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'x-foo',
    properties: {
      prop: {
        notify: true
      },
      item: {
        notify: true
      },
      parentProp: {
        notify: true,
      },
      parentItemProp: {
        notify: true
      },
      parentParentProp: {
        notify: true,
      },
      parentParentItemProp: {
        notify: true
      },
      parentParentParentProp: {
        notify: true,
      },
      parentParentParentItemProp: {
        notify: true
      }
    }
  });
  Polymer({
    is: 'x-bar',
    properties: {
      prop: {
        notify: true
      },
      item: {
        notify: true
      },
      parentProp: {
        notify: true,
      },
      parentItemProp: {
        notify: true
      },
      parentParentProp: {
        notify: true,
      },
      parentParentItemProp: {
        notify: true
      },
      parentParentParentProp: {
        notify: true,
      },
      parentParentParentItemProp: {
        notify: true
      }
    }
  });
</script>

<dom-module id="x-nested-if">
  <template>
    <template is="x-if" id="if-1" if="{{shouldStamp}}">
      <x-foo on-test1="testHandler1"
             prop="{{prop}}"
             item-prop="{{item.prop}}"
             parent-prop="{{parent.prop}}"
             parent-item-prop="{{parent.item.prop}}">
      </x-foo>
      <template is="x-if" id="if-2" if="{{parent.shouldStamp}}">
        <x-foo on-test2="testHandler2"
               prop="{{prop}}"
               item-prop="{{item.prop}}"
               parent-prop="{{parent.prop}}"
               parent-item-prop="{{parent.item.prop}}"
               parent-parent-prop="{{parent.parent.prop}}"
               parent-parent-item-prop="{{parent.parent.item.prop}}">
        </x-foo>
        <template is="x-if" id="if-3" if="{{parent.parent.shouldStamp}}">
          <x-foo on-test3="testHandler3"
                 prop="{{prop}}"
                 item-prop="{{item.prop}}"
                 parent-prop="{{parent.prop}}"
                 parent-item-prop="{{parent.item.prop}}"
                 parent-parent-prop="{{parent.parent.prop}}"
                 parent-parent-item-prop="{{parent.parent.item.prop}}"
                 parent-parent-parent-prop="{{parent.parent.parent.prop}}"
                 parent-parent-parent-item-prop="{{parent.parent.parent.item.prop}}">
          </x-foo>
        </template>
      </template>
    </template>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'x-nested-if',
    testHandler1Count: 0,
    testHandler2Count: 0,
    testHandler3Count: 0,
    testHandler1: function() {
      this.testHandler1Count++;
    },
    testHandler2: function() {
      this.testHandler2Count++;
    },
    testHandler3: function() {
      this.testHandler3Count++;
    }
  });
</script>

<dom-module id="x-nested-if-configured">
  <template>
    <template is="x-if" id="if-1" if="{{shouldStamp}}">
      <x-foo prop="{{prop}}"
             item-prop="{{item.prop}}"
             parent-prop="{{parent.prop}}"
             parent-item-prop="{{parent.item.prop}}">
      </x-foo>
      <template is="x-if" id="if-2" if="{{parent.shouldStamp}}">
        <x-foo prop="{{prop}}"
               parent-prop="{{parent.prop}}"
               parent-item-prop="{{parent.item.prop}}"
               parent-parent-prop="{{parent.parent.prop}}"
               parent-parent-item-prop="{{parent.parent.item.prop}}">
        </x-foo>
        <template is="x-if" id="if-3" if="{{parent.parent.shouldStamp}}">
          <x-foo prop="{{prop}}"
                 parent-prop="{{parent.prop}}"
                 parent-item-prop="{{parent.item.prop}}"
                 parent-parent-prop="{{parent.parent.prop}}"
                 parent-parent-item-prop="{{parent.parent.item.prop}}"
                 parent-parent-parent-prop="{{parent.parent.parent.prop}}"
                 parent-parent-parent-item-prop="{{parent.parent.parent.item.prop}}">
          </x-foo>
        </template>
      </template>
    </template>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'x-nested-if-configured',
    properties: {
      shouldStamp: {
        value: true
      },
      prop: {
        value: 'outer',
      },
      item: {
        value: function() { return {prop: 'outerItem'}; }
      }
    }
  });
</script>

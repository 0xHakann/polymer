<script>

  /*
   * Define public property API. 
   *
   * published: {
   *   <property>: <Type || Object>,
   *   ...
   * 
   *   // `foo` property can be assigned via attribute, will be deserialized to 
   *   // the specified data-type. All `published` properties have this behavior.  
   *   foo: String,
   *
   *   // `bar` property has additional behavior specifiers.
   *   //   type: type for (de-)serialization
   *   //   notify: true to send a signal when a value is set to this property
   *   //   reflect: true to serialize the property to an attribute 
   *   //   readOnly: if true, the property has no setter
   *   bar: {
   *     type: Boolean,
   *     notify: true 
   *   }
   * }
   * 
   */
  Base.addFeature({

    published: {
    },

    nob: Object.create(null),

    register: function(prototype) {
      for (var n in prototype.published) {
        if (prototype.isNotifyProperty(n)) {
          prototype.addPropertyEffect(n, 'notify');
        }
      }
    },
    
    getPublishInfo: function(property) {
      var p = this.published[property];
      if (typeof(p) === 'function') {
        p = this.published[property] = {
          type: p 
        };
      }
      return p || Base.nob;
    },

    getPublishedPropertyType: function(property) {
      return this.getPublishInfo(property).type;
    },

    isReadOnlyProperty: function(property) {
      return this.getPublishInfo(property).readOnly;
    },

    isNotifyProperty: function(property) {
      return this.getPublishInfo(property).notify;
    },

    isReflectedProperty: function(property) {
      return this.getPublishInfo(property).reflect;
    }

  });

</script>
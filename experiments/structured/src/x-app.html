<link rel="import" href="../../../polymer/polymer.html">
<link rel="import" href="../../../polymer/data.html">
<link rel="import" href="data.html">
<link rel="import" href="x-count.html">
<link rel="import" href="x-compose.html">
<link rel="import" href="x-uber-compose.html">

<style>

  x-app {
    display: block;
    padding: 4px;
    border: 2px dotted silver;
  }

  x-app section {
    border: 1px dashed seagreen;
    padding: 4px;
    margin: 16px;
  }
</style>

<template>
  
  <section>
    item.count: 
    <x-count id="a" count="{{item.count}}" on-count-changed="notifyItemProperty" on-item-property-changed="itemDoTheThing"></x-count>  
  </section>

  <section>
    item.count: 
    <x-count id="b" count="{{item.count}}" on-count-changed="notifyItemProperty" on-item-property-changed="itemDoTheThing"></x-count>  
  </section>

  <section>
    item: 
    <x-compose id="compose" item="{{item}}" on-item-property-changed="itemDoTheThing"></x-compose>
  </section>

  <section>
    item: 
    <x-uber-compose id="compose2" item="{{item}}" on-item-property-changed="itemDoTheThing"></x-uber-compose>
  </section>

  <section>
    <div>item.count: <span>{{item.count}}</span></div>
    <div>item.count: <span>{{item.count}}</span></div>
  </section>

</template>

<script>

  Polymer({

    name: 'x-app',

    published: {

      item: Object

    },

    created: function() {
      this.item = {count: 5};
      // TODO(sorvell): need null checking or this will error
      //this.a = {};
    },

    notifyItemProperty: function(e) {
      notifyObject.call(e.target, 'item');
    },


    itemDoTheThing: function(e) {
      console.log('itemDoTheThing', e.target, e.target.count);
      effectNotifyObject.call(this, 'item');
    }

});

</script>


<!--
/*
 * Copyright 2012 The Toolkitchen Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<element name="g-togglebutton" attributes="value">
  <link rel="components" href="g-component.html">
  <link rel="stylesheet" href="css/g-togglebutton.css" />
  <template>
    <div id="toggle" class="toggle" onclick="x('clickHandler')">
      <span class="on">ON</span>
      <span class="off">OFF</span>
      <span class="thumb"></span>
    </div>
  </template>
  <script>
    this.component({
      created: function() {
        this.valueAttributeChanged();
      },
      prototype: {
        valueAttributeChanged: function() {
          this.$.toggle.classList[this.trueValue() ? 'add' : 'remove']('on');
        },
        clickHandler: function() {
          this.value = !this.trueValue();
        },
        // note: should base component auto-convert string value to boolean?
        trueValue: function() {
          return this.value != 'false' && Boolean(this.value);
        }
        // TODO(ffu): need to add dragging support
      }
    });
  </script>
</element>

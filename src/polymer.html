<!--
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="module.html">
<link rel="import" href="lang.html">
<link rel="import" href="base.html">

<script>

  modulate('Polymer', ['Base'], function(Base) {

    Base.__proto__ = HTMLElement.prototype;

    window.Polymer = function(prototype) {
      prototype.__proto__ = Base;
      prototype.registerCallback();
      // native Custom Elements treats 'undefined' extends property
      // as valued, the property must not exist to be ignored
      var options = {
        prototype: prototype
      };
      if (prototype.extends) {
        options.extends = prototype.extends;
      }
      // TODO(sjmiles): temporary BC for s\name\tag 
      document.registerElement(prototype.tag || prototype.name, options);
      return prototype.constructor;
    };

    return Polymer;

  });
  
</script>

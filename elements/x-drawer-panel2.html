<style>

  x-drawer-panel2 {
    position: relative;
  }
  
  x-drawer-panel2 > #drawer {
    right: auto;
    width: 256px;
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
    transition: -webkit-transform 200ms ease-in;
    transition: transform 200ms ease-in;
  }
  
  x-drawer-panel2.opened > #drawer {
    -webkit-transform: none;
    transform: none;
  }
  
  x-drawer-panel2 > #drawer > *,
  x-drawer-panel2 > #main > * {
    height: 100%;
  }
  
  x-drawer-panel2 > #main > #scrim {
    visibility: hidden;
    opacity: 0;
    background-color: rgba(0, 0, 0, 0.15);
    transition: opacity 200ms ease-in-out, visibility 200ms ease-in-out;
  }
  
  x-drawer-panel2.opened > #main > #scrim {
    visibility: visible;
    opacity: 1;
  }

</style>
<template>

  <div id="main" fit vertical layout>

    <content select="[main]"></content>
    <div id="scrim" fit></div>

  </div>
  
  <div id="drawer" fit vertical layout>

    <content select="[drawer]"></content>
    
  </div>

</template>
<script>

  Polymer({

    name: 'x-drawer-panel2',

    hostAttributes: 'vertical layout',
    
    published: {
      opened: Boolean
    },
    
    bind: {
      opened: 'openedChanged'
    },
    
    listeners: {
      click: 'click',
      'scrim.click': 'closeDrawer'
    },
    
    toggleAttribute: 'x-drawer-toggle',
    
    closeDrawer: function() {
      this.opened = false;
    },
    
    toggleDrawer: function() {
      this.opened = !this.opened;
    },

    openedChanged: function() {
      this.classList.toggle('opened', this.opened);
    },

    click: function(e) {
      if (e.target && this.toggleAttribute && 
          e.target.hasAttribute(this.toggleAttribute)) {
        this.toggleDrawer();
      }
    }

  });

</script>

<!doctype html>

<script src="../../perf-lib/perf.js"></script>

<style>
  x-div {
    display: block;
    border: 1px solid red;
    padding: 1px;
    margin: 1px;
  }
</style>

<script>

  Base = {
    // (semi-)pluggable features for Base
    _features: [],

    addFeature: function(feature) {
      this._features.push(feature);
      extend(Base, feature);
      delete Base.init;
      delete Base.register;
    }

  };

  Base.__proto__ = HTMLElement.prototype;

  Polymer = function(prototype) {
    prototype.__proto__ = Base;
    document.registerElement(prototype.name, {prototype: prototype});
  };
  
  Polymer({
    name: 'x-div
  });
  
</script>

<body>

<script>console.perf();</script>

<script>

  var frag = document.createDocumentFragment();
  for (var i=0; i<1000; i++) {
    frag.appendChild(document.createElement('x-div'));
  }
  document.body.appendChild(frag);

</script>

<script>console.perfEnd();</script>

</body>